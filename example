import { Component, OnInit } from '@angular/core';
import { FormBuilder, FormGroup, Validators } from '@angular/forms';
import { DebitCardService } from '../debit-card.service';

@Component({
  selector: 'app-debit-card',
  templateUrl: './debit-card.component.html',
  styleUrls: ['./debit-card.component.css']
})
export class DebitCardComponent implements OnInit {

  debitCardDetails: any[] = [];
  accountNumberForm: FormGroup;

  constructor(private fb: FormBuilder, private debitCardService: DebitCardService) {
    this.accountNumberForm = this.fb.group({
      accountNumber: ['', Validators.required]
    });
  }

  ngOnInit(): void {
  }

  // Method to fetch debit card details based on input account number
  getDebitCardDetails(): void {
    const accountNumber = this.accountNumberForm.get('accountNumber')?.value;
    if (accountNumber) {
      this.debitCardService.getDebitCardDetails(accountNumber).subscribe(
        (data: any[]) => {
          this.debitCardDetails = data;
        },
        (error) => {
          console.error('Error fetching debit card details:', error);
          // Handle error as needed, e.g., show error message to user
        }
      );
    }
  }
<div class="container">
  <h2>Debit Card Details</h2>

  <form [formGroup]="accountNumberForm" (ngSubmit)="getDebitCardDetails()">
    <label for="accountNumber">Account Number:</label>
    <input type="number" id="accountNumber" formControlName="accountNumber" placeholder="Enter account number">
    <button type="submit" [disabled]="accountNumberForm.invalid">Fetch Details</button>
  </form>

  <div *ngIf="debitCardDetails.length > 0">
    <h3>Debit Card Details</h3>
    <ul>
      <li *ngFor="let card of debitCardDetails">
        <p>Debit Card Number: {{ card.debitCardNo }}</p>
        <p>CVV: {{ card.cvv }}</p>
        <p>Expiry Date: {{ card.expiryDate }}</p>
      </li>
    </ul>
  </div>

  <div *ngIf="debitCardDetails.length === 0 && accountNumberForm.valid">
    <p>No debit card details found for account number {{ accountNumberForm.get('accountNumber')?.value }}</p>
  </div>

</div>
}
