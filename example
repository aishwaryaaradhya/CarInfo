import { Component, OnInit } from '@angular/core';
import { FormBuilder, FormGroup, Validators } from '@angular/forms';
import { DebitCardService } from '../debit-card.service';

@Component({
  selector: 'app-debit-card',
  templateUrl: './debit-card.component.html',
  styleUrls: ['./debit-card.component.css']
})
export class DebitCardComponent implements OnInit {

  debitCardDetails: any[] = [];
  accountNumberForm: FormGroup;

  constructor(private fb: FormBuilder, private debitCardService: DebitCardService) {
    this.accountNumberForm = this.fb.group({
      accountNumber: ['', Validators.required]
    });
  }

  ngOnInit(): void {
  }

  // Method to fetch debit card details based on input account number
  getDebitCardDetails(): void {
    const accountNumber = this.accountNumberForm.get('accountNumber')?.value;
    if (accountNumber) {
      this.debitCardService.getDebitCardDetails(accountNumber).subscribe(
        (data: any[]) => {
          this.debitCardDetails = data;
        },
        (error) => {
          console.error('Error fetching debit card details:', error);
          // Handle error as needed, e.g., show error message to user
        }
      );
    }
  }

}
